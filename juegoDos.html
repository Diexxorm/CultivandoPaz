<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>🌱 Fase 2: La Semilla de las Decisiones</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Poppins', sans-serif;
    }

    body {
      background: linear-gradient(135deg, #2d1b4e, #1a1a2e);
      color: #fff;
      text-align: center;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    h1 {
      font-size: 2em;
      margin-bottom: 10px;
      text-shadow: 0 0 15px #ffd966;
    }

    #tree-container {
      position: relative;
      width: 150px;
      height: 220px;
      margin: 20px auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: end;
    }

    /* Etapas del árbol */
    #seed, #sprout, #trunk, #leaves {
      transition: all 1s ease;
    }

    #seed {
      width: 25px;
      height: 25px;
      background: #6d4c41;
      border-radius: 50%;
      box-shadow: 0 0 15px rgba(255,255,255,0.1);
    }

    #sprout {
      width: 5px;
      height: 0;
      background: #4caf50;
      margin-top: -5px;
      border-radius: 10px;
      opacity: 0;
    }

    #trunk {
      width: 20px;
      height: 0;
      background: #795548;
      border-radius: 10px;
      opacity: 0;
    }

    #leaves {
      width: 0;
      height: 0;
      background: #4caf50;
      border-radius: 50%;
      position: absolute;
      bottom: 100px;
      opacity: 0;
      box-shadow: 0 0 0px transparent;
    }

    #question {
      font-size: 1.1em;
      margin-top: 10px;
      padding: 0 10px;
    }

    .option {
      background: rgba(255, 255, 255, 0.1);
      padding: 12px 15px;
      margin: 8px;
      border: 2px solid #ffd966;
      border-radius: 10px;
      width: 80%;
      max-width: 300px;
      cursor: pointer;
      display: block;
      margin-left: auto;
      margin-right: auto;
      transition: 0.3s;
    }

    .option:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: scale(1.05);
    }

    #message {
      margin-top: 15px;
      font-weight: bold;
      font-size: 1.1em;
      min-height: 30px;
    }

    .btn {
      background: #ffd966;
      color: #333;
      border: none;
      padding: 12px 25px;
      margin: 10px;
      border-radius: 10px;
      font-size: 1em;
      cursor: pointer;
      transition: 0.3s;
      box-shadow: 0 0 10px #ffeb99;
    }

    .btn:hover {
      background: #ffeb99;
      transform: scale(1.05);
    }

    @media (max-width: 600px) {
      h1 { font-size: 1.6em; }
      #question { font-size: 1em; }
      .option { font-size: 0.9em; }
      #tree-container { width: 120px; height: 180px; }
    }
  </style>
</head>
<body>

  <h1>🌱 Fase 2: La Semilla de las Decisiones</h1>

  <div id="tree-container">
    <div id="leaves"></div>
    <div id="trunk"></div>
    <div id="sprout"></div>
    <div id="seed"></div>
  </div>

  <div id="question"></div>
  <div id="options"></div>
  <div id="message"></div>
  <div id="buttons"></div>

  <script>
    const questions = [
      {
        text: "Encuentras una billetera en el camino. ¿Qué haces?",
        options: ["La devuelves si tiene contacto", "La guardas para ti", "La tiras lejos"],
        correct: 0
      },
      {
        text: "Un amigo te cuenta un secreto. ¿Cómo reaccionas?",
        options: ["Lo respetas y guardas silencio", "Lo cuentas a otros", "Te burlas de él"],
        correct: 0
      },
      {
        text: "Tu maestro te corrige frente a todos...",
        options: ["Aprendes y agradeces la corrección", "Te molestas y respondes mal", "Te levantas y te vas"],
        correct: 0
      },
      {
        text: "Un compañero olvidó su almuerzo.",
        options: ["Compartes un poco del tuyo", "Le dices que no es tu problema", "Te ríes"],
        correct: 0
      },
      {
        text: "Alguien se esfuerza pero no logra un buen resultado.",
        options: ["Lo motivas a seguir intentando", "Te burlas", "Lo ignoras"],
        correct: 0
      }
    ];

    let current = 0;
    let growthStage = 0;
    let score = 0;

    const seed = document.getElementById("seed");
    const sprout = document.getElementById("sprout");
    const trunk = document.getElementById("trunk");
    const leaves = document.getElementById("leaves");
    const questionDiv = document.getElementById("question");
    const optionsDiv = document.getElementById("options");
    const messageDiv = document.getElementById("message");
    const buttonsDiv = document.getElementById("buttons");

    showQuestion();

    function showQuestion() {
      buttonsDiv.innerHTML = "";
      messageDiv.innerHTML = "";

      if (current >= questions.length) {
        endGame();
        return;
      }

      const q = questions[current];
      questionDiv.textContent = q.text;
      optionsDiv.innerHTML = "";

      q.options.forEach((opt, i) => {
        const btn = document.createElement("div");
        btn.className = "option";
        btn.textContent = opt;
        btn.onclick = () => checkAnswer(i);
        optionsDiv.appendChild(btn);
      });
    }

    function checkAnswer(index) {
      const correct = questions[current].correct;
      if (index === correct) {
        score++;
        messageDiv.textContent = "🌿 ¡Buena elección! La semilla crece con sabiduría.";
        growthStage = Math.min(growthStage + 1, 5);
      } else {
        messageDiv.textContent = "🍂 Esa decisión no ayudó a tu semilla...";
      }

      animateGrowth();
      current++;
      setTimeout(showQuestion, 1800);
    }

    function animateGrowth() {
      switch (growthStage) {
        case 1:
          sprout.style.height = "30px";
          sprout.style.opacity = "1";
          break;
        case 2:
          trunk.style.height = "60px";
          trunk.style.opacity = "1";
          break;
        case 3:
          leaves.style.width = "60px";
          leaves.style.height = "60px";
          leaves.style.opacity = "1";
          leaves.style.boxShadow = "0 0 15px #8aff8a";
          break;
        case 4:
          leaves.style.width = "90px";
          leaves.style.height = "90px";
          leaves.style.background = "#4caf50";
          leaves.style.boxShadow = "0 0 25px 10px #a3ff99";
          break;
        case 5:
          leaves.style.width = "110px";
          leaves.style.height = "110px";
          leaves.style.background = "#9eff9e";
          leaves.style.boxShadow = "0 0 35px 15px #eaff9e";
          break;
      }
    }

    function endGame() {
      optionsDiv.innerHTML = "";
      questionDiv.innerHTML = "";

      if (score >= 4) {
        messageDiv.innerHTML = "🌳 ¡Tu árbol floreció completamente gracias a tus decisiones sabias!";
        leaves.style.boxShadow = "0 0 50px 20px rgba(255, 255, 150, 0.8)";
        const nextBtn = document.createElement("button");
        nextBtn.className = "btn";
        nextBtn.textContent = "➡️ Avanzar a la Fase 3";
        nextBtn.onclick = () => window.location.href = "juegoTres.html";
        buttonsDiv.appendChild(nextBtn);
      } else {
        messageDiv.innerHTML = "💔 Tu árbol no creció del todo... pero puedes intentarlo otra vez.";
        const retryBtn = document.createElement("button");
        retryBtn.className = "btn";
        retryBtn.textContent = "🔁 Reintentar";
        retryBtn.onclick = () => location.reload();

        const homeBtn = document.createElement("button");
        homeBtn.className = "btn";
        homeBtn.textContent = "🏠 Volver al Inicio";
        homeBtn.onclick = () => window.location.href = "index.html";

        buttonsDiv.appendChild(retryBtn);
        buttonsDiv.appendChild(homeBtn);
      }
    }
  </script>
</body>
</html>
